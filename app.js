// Generated by CoffeeScript 1.7.1
(function() {
  var PSD, background, createRectangle, rectangle, rectangle2, rectangle3, rectangle4, rectangle5, sections;

  PSD = Framer.Importer.load("imported/google-reel");

  tools.storeOriginal(PSD);

  PSD.container.brightness = 0;

  PSD.container.animate({
    properties: {
      brightness: 100
    },
    curve: "linear",
    time: 0.5
  });

  background = new BackgroundLayer({
    backgroundColor: "rgba(77, 208, 225, 1.00)"
  });

  createRectangle = function() {
    var layer;
    layer = new Layer({
      width: 400,
      height: 400,
      backgroundColor: "#fff",
      shadowY: 12,
      shadowBlur: 15,
      borderRadius: "6px",
      opacity: 0
    });
    layer.shadowColor = "rgba(0, 0, 0, 0.2)";
    layer.superLayer = PSD.container;
    layer.center();
    layer.original;
    layer.originalFrame = layer.frame;
    layer.states.add({
      centerInvisible: {
        scale: 0.01,
        opacity: 1
      },
      centerBig: {
        scale: 1,
        opacity: 1,
        height: 400
      },
      rotated: {
        shadowY: 0,
        rotation: 90,
        height: 800,
        y: -40
      },
      unrotated: {
        opacity: 1,
        height: 400,
        y: layer.originalFrame.y,
        shadowY: 0
      },
      barrotated: {
        opacity: 0
      },
      bar: {
        rotation: 0,
        opacity: 1,
        width: 400,
        height: 110
      }
    });
    return layer;
  };

  rectangle = createRectangle();

  rectangle2 = createRectangle();

  rectangle3 = createRectangle();

  rectangle4 = createRectangle();

  rectangle5 = createRectangle();

  rectangle.states.animationOptions = {
    curve: "spring(95, 20, 10)"
  };

  rectangle.states.switchInstant("centerInvisible");

  rectangle.states.animationOptions = {
    curve: "spring(150, 22, 1)"
  };

  utils.delay(0.5, function() {
    return rectangle.states["switch"]("centerBig");
  });

  sections = {};

  sections.oneBox = function() {
    rectangle.off(Events.Click, sections.oneBox);
    tools.switchInstantAll("default", [rectangle2, rectangle3, rectangle4, rectangle5]);
    rectangle.states["switch"]("rotated");
    return utils.delay(0.3, sections.twoBoxes);
  };

  utils.delay(0.5, sections.oneBox);

  sections.twoBoxes = function() {
    rectangle.off(Events.AnimationEnd, sections.twoBoxes);
    rectangle.fadeOut();
    rectangle2.fadeIn();
    rectangle3.fadeIn();
    rectangle2.move(-250, 0);
    rectangle3.move(250, 0);
    return utils.delay(1, function() {
      rectangle2.move(250, 0, "ease-in", 0.3);
      rectangle3.move(-250, 0, "ease-in", 0.3);
      rectangle2.fadeOut();
      rectangle3.fadeOut();
      rectangle.states["switch"]("unrotated");
      return rectangle.on(Events.AnimationEnd, sections.fourBars);
    });
  };

  sections.fourBars = function() {
    var barMove;
    rectangle.off(Events.AnimationEnd, sections.fourBars);
    rectangle.states["switch"]("barrotated");
    tools.switchInstantAll("bar", [rectangle2, rectangle3, rectangle4, rectangle5]);
    rectangle2.moveInstant(0, 0);
    rectangle3.moveInstant(0, 110);
    rectangle4.moveInstant(0, 220);
    rectangle5.moveInstant(0, 330);
    utils.delay(0.05, function() {
      return rectangle4.move(0, 10, "ease-in");
    });
    utils.delay(0.1, function() {
      return rectangle3.move(0, -10, "ease-in");
    });
    utils.delay(0.15, function() {
      var rec2anim;
      return rec2anim = rectangle2.move(0, -30, "ease-in");
    });
    barMove = rectangle5.move(0, 30);
    return barMove.on("end", function() {
      var shadowChange;
      shadowChange = rectangle5.animate({
        properties: {
          shadowY: 27,
          shadowBlur: 24
        },
        curve: "linear",
        time: 0.2
      });
      return shadowChange.on("end", function() {
        var barMove2;
        barMove2 = rectangle5.move(0, -260, "ease-in-out", 0.4);
        utils.delay(0.05, function() {
          return rectangle4.move(0, 130, "ease-in-out");
        });
        utils.delay(0.1, function() {
          return rectangle3.move(0, 130, "ease-in-out");
        });
        return barMove2.on("end", function() {
          return utils.delay(0.2, function() {
            var shadowReset;
            shadowReset = rectangle5.animate({
              properties: {
                shadowY: 12,
                shadowBlur: 15
              },
              curve: "linear",
              time: 0.2
            });
            return shadowReset.on("end", function() {
              rectangle4.move(0, -40);
              rectangle3.move(0, -20);
              rectangle2.move(0, 20);
              rectangle5.fadeOut();
              rectangle4.fadeOut();
              rectangle3.fadeOut();
              rectangle2.fadeOut();
              return utils.delay(0.1, function() {
                var finalFade;
                finalFade = rectangle.fadeIn();
                return finalFade.on("end", function() {
                  return utils.delay(1, sections.oneBox);
                });
              });
            });
          });
        });
      });
    });
  };

}).call(this);
